# VPN → IPsec → Site-to-Site VPN 란 

## 1. VPN이란? (Virtual Private Network)
VPN은 공용 인터넷망 위에 암호화된 터널을 생성하여 사설 네트워크처럼 안전하게 통신할 수 있게 해주는 기술이다.

- 인터넷(공용망)을 사용하지만
- 암호화 + 인증을 통해
- 마치 전용 회선처럼 안전하게 통신

### 주요 목적
- 🔒 보안 (데이터 암호화)
- 🌐 사설 IP 통신(사설 IP 기반 통신)
- 🏢 물리적 거리 극복

---

## 2. IPsec이란? (Internet Protocol Security)
IPsec은 VPN을 구현하기 위한 표준 보안 프로토콜 집합이다.
- VPN은 개념임 
- IPsec은 VPN을 만드는 기술

### IPsec이 제공하는 보안 기능
| 기능        | 설명                      |
|---------|-----------------------|
| 🔐 암호화    | 데이터 내용 보호 (AES 등)       |
| 🧾 인증     | 상대방이 진짜인지 확인 (PSK, 인증서) |
| 🔁 무결성    | 중간 변조 방지                |
| 🚫 재전송 방지 | Replay Attack 방어        |

---

## 3. Site-to-Site VPN이란?
두 개의 네트워크(사이트)를 IPsec 터널로 직접 연결하는 VPN 방식이다.

### 구성 예시
```css
[온프레미스 사설망]              [AWS VPC]
192.168.0.0/24  ── IPsec 터널 ── 10.1.0.0/16
        ER605                StrongSwan / VGW

```

### 특징
- PC ↔ PC가 아님
- 네트워크 ↔ 네트워크 연결
- 한 번 연결하면 내부 장비 모두 통신 가능
- 내부 장비 전체 자동 통신

---

## 4. 개념 관계 정리
```
VPN (개념)
 └─ IPsec (기술)
     └─ Site-to-Site VPN (구현 방식)
```

| 구분           | 설명           |
| ------------ | ------------ |
| VPN          | 보안 터널 개념     |
| IPsec        | VPN 구현 표준    |
| Site-to-Site | 네트워크 간 연결 방식 |


---

## 5. 동작 구조
### Phase 1 (IKE)
- 상대 인증
- 암호화 알고리즘 협상
- IKE SA 생성

### Phase 2 (ESP)
- 실제 데이터 암호화
- IPsec SA 생성

---

## 6. Site-to-Site VPN 장점
1. 전용선 없이 사설망 연결 가능
2. 내부 IP 그대로 사용
3. NAT 불필요
4. 높은 보안성
5. 서버 설정 변경 최소화
6. 중앙 집중형 관리
7. 하이브리드 클라우드 필수 요소

---

## 7. 보안성 우수
| 항목   | 설명             |
| ---- | -------------- |
| 암호화  | AES-256        |
| 인증   | PSK / 인증서      |
| 무결성  | SHA-2          |
| 키 교환 | Diffie-Hellman |

금융, 공공, 기업 환경에서도 사용


## 8. 전체 네트워크 자동 연결
- PC마다 VPN 설치 ❌
- 라우터/게이트웨이 1번 설정 ⭕

## 9. 단점 및 고려사항
- 인터넷 품질 의존
- 대역폭 및 지연 문제
- 설정 복잡도
- 이중화 필요

---

## 10. AWS 기준 활용 사례
- 온프레미스 ↔ AWS EC2/RDS/EKS 연동
- 사내 AD, DNS 통합
- 개발/운영 환경 분리
- DMZ 및 보안 아키텍처 구성

---

## 11. 요약
VPN은 개념, IPsec은 구현 기술, Site-to-Site VPN은 네트워크 간 안전한 연결 방식이다.
