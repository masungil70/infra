### 경로 추적란 무엇인가?
 
```
windows 에서 실행 : tracert 8.8.8.8
   
ubuntu 에서 실행 : traceroute 8.8.8.8

  최대 30홉 이상의
  dns.google [8.8.8.8](으)로 가는 경로 추적:

    1    <1 ms    <1 ms    <1 ms  192.168.0.1
    2     *        *        *     요청 시간이 만료되었습니다.
    3     1 ms     1 ms     1 ms  112.189.31.157
    4     6 ms     6 ms     6 ms  112.174.49.173
    5     7 ms     7 ms     7 ms  112.174.84.58
    6    33 ms    33 ms    33 ms  72.14.202.136
    7    30 ms    30 ms    30 ms  209.85.245.21
    8    33 ms    32 ms    32 ms  209.85.248.113
    9    31 ms    31 ms    31 ms  dns.google [8.8.8.8]
```
                                                                                                                                    
  1. `tracert` (경로 추적)란 무엇인가?
  
  tracert는 내 컴퓨터에서 특정 목적지(여기서는 Google의 DNS 서버인 8.8.8.8)까지 데이터 패킷이 어떤 경로(어떤 라우터들을 거쳐
  가는지)를 통해 이동하는지 시각적으로 보여주는 네트워크 진단 도구입니다.

   * 홉(Hop): 패킷이 목적지까지 가는 동안 거치는 각 라우터를 의미합니다. 1홉은 첫 번째 라우터, 2홉은 두 번째 라우터를 뜻합니다.
   * <1 ms, 6 ms, 33 ms 등: 내 컴퓨터에서 해당 홉의 라우터까지 데이터를 보냈다가 다시 응답을 받는 데 걸리는 왕복 시간(Round Trip
     Time, RTT)입니다. 3번씩 측정하여 보여줍니다.
   * IP 주소/이름: 해당 홉에 위치한 라우터의 주소 또는 이름입니다.

  ---

  2. 단계별 경로 상세 분석

  보내주신 결과를 바탕으로 데이터 패킷의 여정을 따라가 보겠습니다.

  [1단계] Hop 1: 내부 네트워크의 게이트웨이 (우리 집 공유기)

   1 1    <1 ms    <1 ms    <1 ms  192.168.0.1                                                                                     
   * 분석: 192.168.0.1은 가정이나 사무실 등 내부 네트워크에서만 사용하는 사설 IP 주소입니다. 이것은 사용자님의 바로 앞에 있는 인터넷
     공유기 또는 라우터입니다.
   * 의미: 내 컴퓨터에서 출발한 데이터가 가장 먼저 도달한 곳입니다. 거리가 매우 가깝기 때문에 응답 시간(RTT)이 1ms 미만으로 매우
     빠릅니다. 모든 인터넷 통신은 이 장비를 통해 밖으로 나가게 됩니다.

  [2단계] Hop 2: 요청 시간 만료

   1 2     *        *        *     요청 시간이 만료되었습니다.
   * 분석: 2번째 장비에서 응답이 오지 않았다는 의미입니다.
   * 의미: 네트워크에 문제가 있다는 뜻이 아닙니다. 이는 매우 흔한 현상입니다. 보안상의 이유나 라우터의 부하를 줄이기 위해, tracert가
     보내는 특정 종류의 진단용 패킷(ICMP)에 일부러 응답하지 않도록 설정된 라우터들이 많습니다. 이 라우터는 진단 신호는 무시하지만,
     실제 데이터(웹서핑, 게임 등)는 정상적으로 다음 목적지로 전달하고 있습니다. 보통 통신사의 대형 장비에서 이런 경우가 많습니다.

  [3~5단계] Hop 3-5: 인터넷 서비스 제공자(ISP) 네트워크

   1 3     1 ms     1 ms     1 ms  112.189.31.157
   2 4     6 ms     6 ms     6 ms  112.174.49.173
   3 5     7 ms     7 ms     7 ms  112.174.84.58
   * 분석: 112.xxx.xxx.xxx IP 주소들은 한국의 주요 통신사(KT, SKT, LG U+ 등)가 사용하는 공인 IP 대역입니다.                        
   * 의미: 이제 데이터 패킷은 집을 떠나 사용자님이 가입한 통신사(ISP)의 내부 네트워크망을 따라 이동하고 있습니다. 아직 국내에 있기
     때문에 응답 시간이 1~7ms로 매우 빠르고 안정적입니다.
	 
  [6단계] Hop 6: 국제망 진입 및 구글 네트워크 접속

   1 6    33 ms    33 ms    33 ms  72.14.202.136
   * 분석: 가장 주목해야 할 부분입니다. 5번 홉의 7ms에서 6번 홉의 33ms로 응답 시간이 크게 증가했습니다. 또한 72.14.xxx.xxx는 구글이
     소유한 IP 대역입니다.
   * 의미: 이 지점에서 데이터 패킷이 국내 ISP망을 벗어나 국제 해저 케이블 등을 통해 해외에 있는 구글의 네트워크로 진입했음을
     의미합니다. 물리적 거리가 급격히 멀어졌기 때문에 응답 시간이 크게 늘어난 것입니다. 이 패킷은 아마도 일본이나 대만, 혹은 미국
     서부에 있는 구글 데이터센터의 관문 라우터에 도달했을 가능성이 높습니다.

  [7~8단계] Hop 7-8: 구글 내부 백본 네트워크

   1 7    30 ms    30 ms    30 ms  209.85.245.21
   2 8    33 ms    32 ms    32 ms  209.85.248.113
   * 분석: 209.85.xxx.xxx 역시 구글이 소유한 IP 대역입니다. 응답 시간은 30ms 초반대로 안정적으로 유지되고 있습니다.
   * 의미: 이제 패킷은 구글의 데이터센터에 들어와, 구글이 자체적으로 운영하는 매우 빠른 내부 고속도로(백본망)를 타고 최종 목적지
     서버를 향해 이동하고 있습니다.
                                                                                                                                   
  [9단계] Hop 9: 최종 목적지 도착                                                                                                  

   1 9    31 ms    31 ms    31 ms  dns.google [8.8.8.8]
   * 분석: 드디어 최종 목적지인 8.8.8.8 서버에 도착했습니다. tracert가 IP 주소의 호스트 이름인 dns.google까지 성공적으로
     찾아냈습니다.
   * 의미: 내 컴퓨터에서 구글 DNS 서버까지의 경로 추적이 성공적으로 완료되었습니다.

  ---

  최종 요약

  데이터 패킷은 다음과 같은 여정을 거쳤습니다.

   1. 집/사무실 공유기를 통해 인터넷으로 나갔습니다.
   2. 국내 통신사(ISP) 네트워크를 따라 몇 개의 라우터를 거쳤습니다. (약 7ms 소요)
   3. 해외로 나가는 국제망(해저 케이블 등)을 통해 구글의 네트워크로 진입했습니다. (이 구간에서 약 26ms 추가 소요)
   4. 구글의 내부 고속 네트워크를 통해 최종 서버까지 이동했습니다.
   5. 총 9개의 라우터(홉)를 거쳐 약 31ms 만에 최종 목적지인 구글 DNS 서버에 도착했습니다.

  결론적으로, 네트워크 경로와 속도 모두 매우 정상적이고 안정적인 상태임니다.                                          

------  
  tracert 결과에 나온 각 라우터(홉)들이 서로 어떻게 통신하여 패킷을 다음 목적지로 전달하는지, 그 핵심
  원리를 자세히 알아보겠습니다.

  이 과정은 크게 두 단계로 나눌 수 있습니다.

   1. 경로 결정 (Routing): "이 패킷을 다음 어디로 보내야 하는가?" (논리적 주소인 IP 사용)
   2. 패킷 전달 (Forwarding): "결정된 '곳'으로 패킷을 어떻게 전달할 것인가?" (물리적 주소인 MAC 사용)

  tracert 결과의 4번 홉 라우터가 5번 홉 라우터에게 패킷을 전달하는 과정을 예로 들어 설명하겠습니다.

   * 4번 홉 라우터: 112.174.49.173
   * 5번 홉 라우터: 112.174.84.58
   * 최종 목적지: 8.8.8.8
                                                                                                                                    
  ---

  1단계: 경로 결정 (Routing) - "어디로 보낼까?"

  4번 라우터(112.174.49.173)에 최종 목적지가 8.8.8.8인 패킷이 도착했습니다. 라우터는 이제 이 패킷을 어디로 전달해야 할지 결정해야
  합니다.

  가. 라우팅 테이블 (Routing Table) 조회

  모든 라우터는 라우팅 테이블이라는 '인터넷 지도'를 가지고 있습니다. 이 지도에는 다음과 같은 정보가 기록되어 있습니다.


  | 목적지 네트워크 | 서브넷 마스크 | 다음 홉(Next Hop) IP | 인터페이스  |
  |---|---|---|---|
  | 1.0.0.0         | 255.0.0.0     | 10.10.10.2           | Serial0/0          |
  | 8.8.8.0         | 255.255.255.0 | 112.174.84.58        | GigabitEthernet0/1 |
  | 0.0.0.0         | 0.0.0.0       | 20.20.20.2           | Serial0/1          |
                                                                                                                                   


   1. 4번 라우터는 패킷의 최종 목적지 주소인 8.8.8.8을 확인합니다.
   2. 자신의 라우팅 테이블에서 8.8.8.8과 일치하는 경로를 찾습니다.
   3. 가장 구체적인 경로(Longest Match Rule)를 선택합니다. 예를 들어, 8.8.8.0/24와 8.8.0.0/16이 모두 테이블에 있다면, 더 구체적인
      /24 경로를 선택합니다.
   4. 위 테이블 예시에서, 라우터는 8.8.8.0/24 네트워크로 가려면 다음 홉(Next Hop)이 `112.174.84.58` 이고, GigabitEthernet0/1
      인터페이스를 통해 보내야 한다는 것을 알게 됩니다.

  나. 라우팅 테이블은 어떻게 만들어지는가?

  이 '지도'는 다음 세 가지 방법으로 만들어집니다.
   * 직접 연결(Directly Connected): 라우터가 자신의 인터페이스에 직접 연결된 네트워크 정보를 자동으로 추가합니다.
   * 정적 라우팅(Static Routing): 네트워크 관리자가 "이 목적지로 가려면 이리로 보내"라고 수동으로 경로를 입력합니다. (이전 대화에서
     우리가 설정했던 방식)
   * 동적 라우팅(Dynamic Routing): 인터넷의 핵심 방식입니다. 라우터들이 서로 '대화'하여 경로 정보를 자동으로 교환하고 학습합니다.
       * BGP (Border Gateway Protocol): ISP와 ISP 사이, 즉 서로 다른 거대 네트워크들 사이에서 "우리 회사는 이 IP 주소들을 관리하고
         있어!"라고 광고하는 데 사용되는 프로토콜입니다. tracert의 5번 홉(ISP)과 6번 홉(구글) 사이의 통신이 바로 BGP를 통해         
         이루어집니다.                                                                                                              

  ---

  2단계: 패킷 전달 (Forwarding) - "어떻게 전달할까?"

  이제 4번 라우터는 패킷을 112.174.84.58 (5번 라우터)에게 보내야 한다는 것을 알게 되었습니다. 하지만 IP 주소는 논리적인 주소일 뿐,
  물리적인 장비에 직접 데이터를 보낼 수는 없습니다. 바로 옆에 있는 장비와 통신하려면 MAC 주소(물리적 하드웨어 주소)가 필요합니다.

  가. ARP (Address Resolution Protocol)를 이용한 MAC 주소 확인

   1. 4번 라우터는 자신의 ARP 캐시라는 임시 저장 공간을 확인하여 112.174.84.58의 MAC 주소를 알고 있는지 찾아봅니다.
   2. 만약 모른다면, 4번 라우터는 GigabitEthernet0/1 인터페이스를 통해 연결된 네트워크에 ARP 요청(Request)이라는 방송을 보냅니다.
      > "이 네트워크에 있는 분들 중, IP 주소가 `112.174.84.58`인 분 계신가요? 계시면 MAC 주소 좀 알려주세요!"
   3. 이 방송을 들은 5번 라우터(112.174.84.58)가 ARP 응답(Reply)을 보냅니다.
      > "네, 접니다. 제 MAC 주소는 `AA:BB:CC:11:22:33` 입니다."
   4. 4번 라우터는 이 응답을 받고 112.174.84.58의 MAC 주소를 자신의 ARP 캐시에 저장합니다.
                                                                                                                                   
  나. 이더넷 프레임(Ethernet Frame) 생성 및 전송                                                                                   
  이제 모든 준비가 끝났습니다. 4번 라우터는 최종 목적지가 8.8.8.8인 원래의 IP 패킷을 이더넷 프레임이라는 새로운 캡슐에 담아
  포장합니다.

   * 출발지 MAC 주소: 4번 라우터의 GigabitEthernet0/1 포트 MAC 주소
   * 목적지 MAC 주소: 방금 ARP를 통해 알아낸 5번 라우터의 MAC 주소 (AA:BB:CC:11:22:33)
   * 내용물: 최종 목적지가 8.8.8.8로 되어 있는 원본 IP 패킷

  이 프레임을 GigabitEthernet0/1 포트를 통해 물리적으로 전송합니다.

  ---

  요약: 전체 과정

   1. 패킷이 라우터에 도착합니다.
   2. (경로 결정) 라우터는 패킷의 최종 목적지 IP 주소를 보고 자신의 라우팅 테이블을 조회합니다.
   3. (경로 결정) 가장 적합한 경로를 선택하여 다음 홉 라우터의 IP 주소를 결정합니다.
   4. (패킷 전달) ARP를 사용하여 다음 홉 라우터의 MAC 주소를 알아냅니다.
   5. (패킷 전달) 원본 IP 패킷을 새로운 이더넷 프레임으로 캡슐화합니다. 이때 프레임의 목적지 주소는 다음 홉 라우터의 MAC 주소입니다.
   6. 프레임을 물리적인 선로를 통해 다음 라우터로 전송합니다.                                                                      
