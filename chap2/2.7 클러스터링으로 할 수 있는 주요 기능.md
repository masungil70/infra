## Proxmox 클러스터링으로 할 수 있는 주요 기능

Proxmox에서 클러스터링을 구축하면 단순히 여러 서버를 한 곳에서 보는 것을 넘어, 매우 강력하고 유용한 기능들을 사용할 수 있게 됩니다. Proxmox 클러스터링을 통해 할 수 있는 주요 기능을 알아보겠습니다.

1.중앙 집중 관리 (Centralized Management)

가장 기본적이면서도 편리한 기능입니다.

* 무엇을 할 수 있나요?
  * 클러스터에 속한 어떤 노드의 웹 주소로 접속하든 전체 클러스터의 모든 노드, 가상머신(VM), 컨테이너, 스토리지를 한 화면에서 보고 관리할 수 있습니다.
* VM을 생성할 때 어느 노드에 만들지 쉽게 선택할 수 있고, 스토리지나 네트워크 같은 자원도 클러스터 전체 관점에서 설정할 수 있습니다.
  * 장점: 여러 대의 서버를 마치 한 대의 거대한 서버처럼 관리할 수 있어 관리의 복잡성이 크게 줄어듭니다.

2.실시간 마이그레이션 (Live Migration)

Proxmox 클러스터의 꽃과 같은 기능 중 하나입니다.

* 무엇을 할 수 있나요?
  * VM을 끄지 않고, 실행 중인 상태 그대로 다른 Proxmox 노드로 실시간으로 이사시키는 기능입니다. 이 과정에서 VM의 서비스는 거의 또는 전혀 중단되지  않습니다.
* 언제 사용하나요?
  * 하드웨어 유지보수: 특정 노드의 RAM을 업그레이드하거나, 디스크를 교체하거나, OS 업데이트를 위해 재부팅해야 할 때, 해당 노드의 모든 VM을 다른 노드로 옮겨놓고 작업을 수행할 수 있습니다. 작업이 끝나면 다시 원래 노드로 옮겨오면 됩니다. 이 모든 과정에서 VM 서비스는 중단되지 않습니다.
* 부하 분산: 특정 노드에 CPU나 메모리 사용량이 너무 몰려있을 때, 일부 VM을 부하가 적은 다른 노드로 옮겨 전체 클러스터의 자원 사용률을 균형 있게 맞출 수 있습니다.
* ⚠️ 중요 요구사항: 이 기능을 사용하려면 VM의 디스크가 공유 스토리지(Shared Storage)에 저장되어 있어야 합니다. NFS, iSCSI, Ceph 등이 대표적인 공유 스토리지이며, 클러스터의 모든 노드가 이 스토리지에 동시에 접근할 수 있어야 합니다.

3.고가용성 (High Availability, HA)

클러스터의 안정성을 극대화하는 핵심 기능입니다.

* 무엇을 할 수 있나요?
  * 물리적인 Proxmox 노드 하나에 하드웨어 고장, 전원 문제 등으로 장애가 발생했을 때, 그 위에서 동작하던 HA 그룹의 VM들을 다른 정상적인 노드에서 자동으로 재시작해주는 기능입니다.
* 장점: 예상치 못한 서버 다운에도 VM 서비스의 중단 시간을 최소화하여 안정적인 서비스 운영을 가능하게 합니다.
  * ⚠️ 중요 요구사항:
    1. 안정적인 쿼럼(Quorum): 이전에 설명드렸듯이, 안정적인 HA를 위해서는 3개 이상의 노드로 클러스터를 구성하거나, 2개의 노드에 QDevice를 추가해야 합니다.
    2. 공유 스토리지 (Shared Storage): 실시간 마이그레이션과 마찬가지로, VM의 디스크가 다른 노드에서도 접근할 수 있는 공유 스토리지에 있어야 합니다.
    3. 펜싱(Fencing): Proxmox가 고장 난 노드를 확실히 차단하고 VM을 재시작하기 위한 메커니즘이 필요하며, 이는 Proxmox HA 시스템에 내장되어 있습니다.

4.분산 스토리지 구축 (Ceph)

Proxmox는 Ceph라는 강력한 분산 스토리지 솔루션과 매우 긴밀하게 통합되어 있습니다.

* 무엇을 할 수 있나요?
  * 별도의 비싼 NAS나 SAN 같은 스토리지 장비 없이, 클러스터 노드들의 로컬 디스크(SSD, HDD)를 네트워크로 묶어 하나의 거대한 공유 스토리지를 만드는 기능입니다.
  * 장점:
    * 비용 효율성: 고가의 스토리지 장비 구매 비용을 절약할 수 있습니다.
    * 확장성: 클러스터에 노드를 추가하면 스토리지의 용량과 성능도 함께 확장됩니다.
    * 안정성: 데이터가 여러 노드에 분산 복제되어 저장되므로, 디스크나 노드 하나에 장애가 발생해도 데이터 유실 없이 서비스를 유지할 수 있습니다.

5.클러스터 전체 백업 및 복제 (Backup and Replication)

    * 백업: Proxmox 백업 서버(PBS)와 연동하면, 클러스터 전체의 VM을 중앙에서 효율적으로 백업하고 관리할 수 있습니다.
    * 복제(Replication):
    * VM을 주기적으로(예: 15분마다) 다른 노드에 복제본으로 만들어두는 기능입니다.
    * 주 노드에 심각한 장애가 발생했을 때, 다른 노드에 있는 복제본 VM을 수동으로 켜서 서비스를 빠르게 복구할 수 있습니다. (HA보다는 복구 시간이  걸리지만, 재해 복구(DR) 관점에서 유용합니다.)

  ---

  | 기능 | 설명 | 주요 요구사항 |
  |---|---|---|
  | 중앙 집중 관리 | 단일 인터페이스에서 모든 노드/VM/스토리지 관리 | 클러스터 기본 구성 |
  | 실시간 마이그레이션 | 서비스 무중단으로 VM을 다른 노드로 실시간 이동 | 공유 스토리지 |
  | 고가용성 (HA)| 노드 장애 시 다른 정상 노드에서 VM 자동 재시작 | 3+ 노드 (또는 QDevice), 공유 스토리지 |
  | 분산 스토리지 (Ceph) | 노드들의 로컬 디스크를 묶어 공유 스토리지 생성 | 3+ 노드 권장, 안정적 네트워크 |
  | 복제 (Replication)   | 다른 노드에 VM 복제본을 주기적으로 생성 (재해 복구용) | - |
  
Proxmox 클러스터링은 여러 대의 개별 서버를 단순한 모음이 아닌, 유기적으로 동작하는 하나의 거대하고 탄력적인 가상화 플랫폼으로 만들어주는 강력한 기능 모음입니다.
