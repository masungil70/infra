## Ceph(세프)가 무엇인지

Ceph란 무엇인가? (한마디로 정의)

Ceph는 "여러 대의 일반 서버들을 묶어, 마치 하나의 거대하고 지능적인 스토리지(저장 공간)처럼 만들어주는 오픈소스 소프트웨어"입니다.

전통적인 방식처럼 비싼 전용 스토리지 장비(SAN, NAS)를 구매하는 대신, 가지고 있는 일반 서버들의 하드디스크나 SSD를 활용하여 강력한 분산 스토리지 시스템을 구축할 수 있게 해줍니다. 이를 소프트웨어 정의 스토리지(Software-Defined Storage, SDS)라고 부릅니다.

### 쉽게 비유하자면

A, B, C 세 사람이 각자 배낭을 메고 있다고 상상해 보세요.

일반 스토리지: 각자의 배낭은 서로 분리되어 있고, A의 배낭이 찢어지면 그 안의 물건은 모두 잃어버립니다.
Ceph 스토리지: Ceph는 이 세 개의 배낭을 마법처럼 하나로 연결합니다.
    1. 데이터를 넣을 때 (쓰기): 책 한 권을 넣으면, Ceph 마법이 이 책을 즉시 복제해서 A, B, C 세 사람의 배낭에 하나씩 넣어둡니다.
    2. 한 사람이 사라져도 (장애): C가 갑자기 집에 가버려도(노드 장애), 책은 여전히 A와 B의 배낭에 안전하게 남아있습니다. Ceph 마법은 C가 사라진 것을 즉시 감지하고, "어, 복제본이 2개밖에 없네?"라며 새로운 D라는 사람이 오면 그 사람의 배낭에 책을 복사해 넣어 항상 3개의 복제본을 유지합니다.
    3. 데이터를 찾을 때 (읽기): 책을 찾을 때, 이 마법은 가장 가까이 있거나 가장 한가한 사람(A, B, C 중 하나)에게서 책을 바로 꺼내줍니다.

이 마법처럼 데이터를 지능적으로 분산하고, 복제하고, 스스로 치유하는 시스템이 바로 Ceph입니다.

---

### Ceph의 주요 특징

1. 통합 스토리지 (Unified Storage)
Ceph 하나로 현대적인 IT 환경에서 필요한 거의 모든 종류의 스토리지를 제공할 수 있습니다.
    * 블록 스토리지 (Block Storage): Proxmox에서 VM의 가상 하드디스크로 사용하는 방식입니다. (예: RBD)
    * 파일 스토리지 (File Storage): 여러 서버가 동시에 접근할 수 있는 공유 폴더(NAS)처럼 사용 가능합니다. (예: CephFS)
    * 오브젝트 스토리지 (Object Storage): Amazon S3처럼 대용량 비정형 데이터(사진, 동영상, 로그)를 저장하고 API로 접근하는 방식입니다. (예: RADOS Gateway)

2. 높은 안정성과 자가 복구 (High Reliability & Self-Healing) 
Ceph는 데이터의 복제본 수를 지정할 수 있습니다(보통 3개). 디스크나 서버 하나에 장애가 발생하면, Ceph가 이를 자동으로 감지하고 다른 건강한 디스크/서버를 이용해 데이터 복제본을 다시 만들어 지정된 복제본 수를 유지합니다. 관리자의 개입 없이도 스스로 장애를 극복하고 데이터를 보호합니다.

3. 엄청난 확장성 (Massive Scalability)
용량이나 성능이 부족해지면, 그냥 클러스터에 새 서버(노드)를 추가하기만 하면 됩니다. Ceph는 새로 추가된 자원을 즉시 인식하고, 기존 데이터를 새로운 서버로 자동 분산(rebalancing)하여 전체적인 성능과 용량을 높입니다. 수 페타바이트(Petabyte)를 넘어 엑사바이트(Exabyte) 수준까지 확장이 가능합니다.

4. 하드웨어 비종속성 (No Vendor Lock-in)
특정 제조사의 비싼 하드웨어에 의존하지 않습니다. Dell, HP, Supermicro 등 어떤 제조사의 일반적인 x86 서버로도 클러스터를 구성할 수 있어 비용 효율적입니다.

---
### Ceph의 핵심 구성 요소

* OSD (Object Storage Daemon): 실제 데이터를 디스크에 저장하고 읽어오는 역할을 하는 '일꾼' 데몬입니다. 클러스터의 디스크 개수만큼 OSD가 실행됩니다.
* MON (Monitor): 클러스터의 전체적인 상태와 구성 정보(지도)를 유지하고 관리하는 '감독관'입니다. 어떤 OSD가 살아있는지, 데이터가 어디에 있는지 등의 핵심 정보를 가지고 있으며, 안정성을 위해 항상 홀수(최소 3개)로 구성됩니다.
* MGR (Manager): 모니터의 부담을 덜어주고, 사용량 통계, 클러스터 상태 모니터링 등 외부 관리 기능을 제공하는 '관리자'입니다.

#### Proxmox에서 Ceph의 의미: 하이퍼컨버지드 인프라(HCI)

Proxmox에 Ceph를 함께 설치하고 사용하는 것을 하이퍼컨버지드 인프라(Hyper-Converged Infrastructure, HCI)라고 부릅니다.

전통적으로는 VM을 실행하는 '컴퓨팅 노드'와 데이터를 저장하는 '스토리지 서버'를 분리했지만, HCI는 하나의 서버가 컴퓨팅(VM 실행)과 스토리지(Ceph) 역할을 동시에 수행합니다.

이를 통해 값비싼 외부 스토리지 장비 없이도 고가용성과 고성능, 뛰어난 확장성을 모두 갖춘 데이터센터를 저렴한 비용으로 구축할 수 있게 됩니다.

Proxmox와 Ceph의 조합이 강력한 오픈소스 HCI 솔루션으로 각광받는 이유입니다.